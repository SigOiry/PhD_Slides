scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. gigas", YEAR, min_year))
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_gigas.gif", animation = rendered)
df <- readxl::read_excel("Data/Part2/Prod_oyster.xlsx") %>%
mutate(across(-YEAR, ~ interpolate_column(.x, YEAR))) %>%
pivot_longer(-YEAR, names_to = "Species", values_to = "Production") %>%
mutate(Production = case_when(Production == -99 ~ NA,
T ~ Production*100)),
df %>%
ggplot(aes(x = YEAR, y = Production, color = Species)) +
geom_line(size = 1.2) + # thicker lines
scale_color_brewer(palette = "Set1") + # nice color palette
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_minimal(base_size = 14) + # clean theme with bigger base text
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "right",
legend.text = element_text(face = "italic") # italic legend text
)
df <- readxl::read_excel("Data/Part2/Prod_oyster.xlsx") %>%
mutate(across(-YEAR, ~ interpolate_column(.x, YEAR))) %>%
pivot_longer(-YEAR, names_to = "Species", values_to = "Production") %>%
mutate(Production = case_when(Production == -99 ~ NA,
T ~ Production*100),
Species = case_when(Species == "angulata" ~ "C. angulata",
Species == "Edulis" ~ "O. edulis",
T ~ "C. gigas"),
years = YEAR)
df %>%
ggplot(aes(x = YEAR, y = Production, color = Species)) +
geom_line(size = 1.2) + # thicker lines
scale_color_brewer(palette = "Set1") + # nice color palette
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_minimal(base_size = 14) + # clean theme with bigger base text
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "right",
legend.text = element_text(face = "italic") # italic legend text
)
min_year <- min(df$YEAR, na.rm = TRUE)
max_prod <- max(df$Production, na.rm = T)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. gigas", YEAR, min_year))
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_gigas.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year))
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
p
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year)) %>%
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
df <- readxl::read_excel("Data/Part2/Prod_oyster.xlsx") %>%
mutate(across(-YEAR, ~ interpolate_column(.x, YEAR))) %>%
pivot_longer(-YEAR, names_to = "Species", values_to = "Production") %>%
mutate(Production = case_when(Production == -99 ~ NA,
T ~ Production),
Species = case_when(Species == "angulata" ~ "C. angulata",
Species == "Edulis" ~ "O. edulis",
T ~ "C. gigas"),
years = YEAR)
df %>%
ggplot(aes(x = YEAR, y = Production, color = Species)) +
geom_line(size = 1.2) + # thicker lines
scale_color_brewer(palette = "Set1") + # nice color palette
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_minimal(base_size = 14) + # clean theme with bigger base text
theme(
plot.title = element_text(hjust = 0.5, face = "bold"),
legend.position = "right",
legend.text = element_text(face = "italic") # italic legend text
)
min_year <- min(df$YEAR, na.rm = TRUE)
max_prod <- max(df$Production, na.rm = T)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year)) %>%
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. gigas", YEAR, min_year))
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year))
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year)) %>%
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. angulata", YEAR, min_year)) %>%
dplyr::filter(Species != "C. gigas")
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Thousand Metric Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_angulata.gif", animation = rendered)
anim_save("Images/Part2/Oyster_gigas.gif", animation = rendered)
df2 <- df %>%
mutate(alongVar = if_else(Species == "C. gigas", YEAR, min_year))
colscale <- c("C. gigas" = "#377eb8","O. edulis" = "#e41a1c","C. angulata" = "#4daf4a")
p <- ggplot(df2,
aes(x = YEAR,
y = Production,
color = Species,
group = Species,
along = alongVar)) +
geom_line(size = 1.2) +
scale_color_manual(values = colscale) +
ylim(c(0,max_prod))+
xlim(c(1900,2010))+
labs(
title = "Production over Years by Species",
x = "Year",
y = "Production (Thousand Metric Tons)",
color = "Species"
) +
theme_bw(base_size = 14) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold", size = 40),
legend.position = c(0.2,0.8),
legend.text = element_text(face = "italic", size = 30),
legend.title = element_text(size = 35),
legend.key.size = unit(1,"cm"),
axis.text.x = element_text(size = 30),
axis.text.y = element_text(size = 30),
axis.title.x = element_text(size = 35),
axis.title.y = element_text(size = 35),
) +
transition_reveal(alongVar)
# render it
# animate(p, nframes = 50, fps = 50, width = 800, height = 600, loop = F)
rendered <- animate(p,  nframes = 50, fps = 50, width = 1500, height = 1080, end_pause = 20, rewind = FALSE, renderer = gifski_renderer(loop = FALSE))
anim_save("Images/Part2/Oyster_gigas.gif", animation = rendered)
library(sf)
library(terra)
library(tidyverse)
library(Utilities.Package)
msk <- "Data/Part2/SajaSouth_32630.shp" %>%
read_sf()
Saja_RGB <- "Data/Part2/Saja/SajaSouth_RGB_LIDAR2.tif" %>%
rast() %>%
crop(msk, mask = T)
lim_x<- c(as.numeric(ext(Saja_RGB)[1:2]))
lim_y<- c(as.numeric(ext(Saja_RGB)[3:4]))
NAflag(Saja_RGB) <- 0
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 255
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "B"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Images/Part2/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
